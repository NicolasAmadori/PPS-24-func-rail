import TestCell.cells
import controller.simconfig.SimulationConfigController
import model.mapgrid.{BigStationBorderPiece, BigStationCenterPiece, EmptyCell, MapGrid, MetalRailPiece, SmallStationPiece, TitaniumRailPiece}
import model.util.RailwayMapper
import scalafx.application.JFXApp3
import scalafx.scene.Scene
import utils.StageManager
import view.simconfig.SimulationConfigView

object SimConfigMain extends JFXApp3:

  val rows: Int = 50
  val cols: Int = 70

  override def start(): Unit =
    val grid = MapGrid(20, 20, cells, 10)

    val controller = SimulationConfigController(grid, RailwayMapper.convert(grid))
    val view = SimulationConfigView(controller)

    controller.attachView(view)

    val stageInstance = new JFXApp3.PrimaryStage:
      title = "Simulation Configurator"
      minWidth = 1000
      minHeight = 800
      scene = new Scene(view.getRoot)
      onShown = _ => view.initGraph()

    StageManager.init(stageInstance)

    stage = stageInstance

object TestCell:
  val cells = Vector(
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      SmallStationPiece(2),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      SmallStationPiece(3),
      MetalRailPiece(),
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      SmallStationPiece(4),
      MetalRailPiece(),
      MetalRailPiece(),
      MetalRailPiece(),
      MetalRailPiece(),
      MetalRailPiece(),
      MetalRailPiece(),
      SmallStationPiece(5),
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      MetalRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      SmallStationPiece(6),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      TitaniumRailPiece(),
      SmallStationPiece(7),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      SmallStationPiece(8),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      TitaniumRailPiece(),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      BigStationBorderPiece(1),
      BigStationBorderPiece(1),
      BigStationBorderPiece(1),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      BigStationBorderPiece(1),
      BigStationCenterPiece(1),
      BigStationBorderPiece(1),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      BigStationBorderPiece(1),
      BigStationBorderPiece(1),
      BigStationBorderPiece(1),
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    ),
    Vector(
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell,
      EmptyCell
    )
  )
